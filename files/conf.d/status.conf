###########################################################
### this file is managed by PUPPET                     ####
### only modify it in puppet repo or you will          ####
### loose the changes !                                ####
###########################################################

# only expose /server-status on a dedicated
# loopback device
<VirtualHost 127.0.0.3:80>
  ServerName 127.0.0.3
  # Allow server status reports generated by mod_status,
  # with the URL of http://servername/server-status
  <Location /server-status>
      SetHandler server-status

      AuthType Basic
      AuthName "Restricted Content"
      AuthUserFile /var/www/htpasswds/munin-status

      <RequireAll>
        Require valid-user
        Require ip 127.0.0.1
      </RequireAll>

      <IfModule mod_security2.c>
    SecRuleEngine Off
      </IfModule>
  </Location>
</VirtualHost>

# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called.
ExtendedStatus On

